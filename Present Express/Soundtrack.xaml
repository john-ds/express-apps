<ex:ExpressWindow x:Class="Present_Express.Soundtrack"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Present_Express"
        xmlns:ex="clr-namespace:ExpressControls;assembly=ExpressControls"
        mc:Ignorable="d" x:Name="Snd"
        Title="{DynamicResource SoundtrackTitleStr}" Closed="Snd_Closed" Width="800" Height="500" Style="{DynamicResource ChromeWindowStyle}" d:FontFamily="Inter" ResizeMode="CanMinimize" WindowStartupLocation="CenterScreen">
    <Grid x:Name="WindowGrid" Background="{DynamicResource BackColor}">
        <DockPanel Margin="0,30,0,0">
            <DockPanel Height="40" DockPanel.Dock="Bottom" LastChildFill="False" Background="{DynamicResource SecondaryColor}">
                <ex:MenuButton x:Name="AddBtn" Click="AddBtn_Click" Visibility="Collapsed" DockPanel.Dock="Right" Text="{DynamicResource AddSlideshowStr}" FontWeight="SemiBold" Icon="{DynamicResource RightIcon}" Margin="0,0,10,0"/>
                <ex:AppCheckBox x:Name="LoopCheck" Content="{DynamicResource LoopStr}" Margin="10,0,0,0" IsChecked="True"/>
                <TextBlock x:Name="CountLbl" Margin="20,0,0,1" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Left" TextTrimming="CharacterEllipsis" Text="{DynamicResource SoundtrackCountStr}" AutomationProperties.LiveSetting="Polite"/>
            </DockPanel>
            <Rectangle Fill="{DynamicResource AppColor}" Height="2" VerticalAlignment="Top" DockPanel.Dock="Bottom"/>
            <Grid Background="{DynamicResource TertiaryColor}" DockPanel.Dock="Right" Width="350">
                <ScrollViewer x:Name="Scroller" Visibility="Collapsed" d:Visibility="Visible" VerticalScrollBarVisibility="Visible">
                    <StackPanel Margin="20">
                        <TextBlock x:Name="PresetLbl" TextWrapping="Wrap" Text="{DynamicResource PresetSoundtrackStr}" FontSize="14" FontWeight="SemiBold" Opacity="0.7"/>
                        <ex:AppButton x:Name="FilterBtn" Click="FilterBtn_Click" Margin="0,20" Background="{DynamicResource BackColor}" LastChildFill="True" NoShadow="True" Icon="{DynamicResource MusicFileIcon}" Text="{DynamicResource FilterCategoryStr}" MoreVisibility="Visible" HorizontalAlignment="Left"/>
                        <ItemsControl x:Name="LibraryItems" AutomationProperties.LabeledBy="{Binding ElementName=PresetLbl}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <DockPanel Margin="0,10">
                                        <ex:ClippedBorder CornerRadius="5" BorderThickness="0" Background="{DynamicResource BackColor}">
                                            <Image Source="{Binding Image}" Width="62" Height="62" VerticalAlignment="Center"/>
                                        </ex:ClippedBorder>
                                        <ex:AppButton Click="AddBtns_Click" Visibility="{Binding AddVisibility}" DockPanel.Dock="Right" NoShadow="True" Icon="{DynamicResource AddIcon}" TextVisibility="Collapsed" ToolTip="{DynamicResource AddStr}" IconSize="23" Padding="6,0" Height="32" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                        <ex:AppButton Click="PlayBtns_Click" DockPanel.Dock="Right" NoShadow="True" Icon="{Binding PlaybackIcon}" TextVisibility="Collapsed" ToolTip="{Binding PlaybackToolTip}" IconSize="23" Padding="6,0" Height="32" Margin="0,0,5,0" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                                        <TextBlock VerticalAlignment="Center" Margin="10,0,10,0" FontSize="14" Padding="0" TextWrapping="WrapWithOverflow" LineHeight="18">
                                            <Run Text="{Binding Name}"/><LineBreak/><Run FontSize="12" Text="{Binding CategoryName}"/>
                                        </TextBlock>
                                    </DockPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>
                <StackPanel x:Name="LoadingGrid" VerticalAlignment="Center" Margin="20" d:Visibility="Collapsed">
                    <ContentControl Content="{DynamicResource MusicFileIcon}" Focusable="False" Width="45" Margin="0,0,0,20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock x:Name="LoadingLbl" Text="{DynamicResource SoundtrackLibraryLoadingStr}" HorizontalAlignment="Center" FontWeight="Semibold" FontSize="18" TextWrapping="Wrap" TextAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock x:Name="ErrorLbl" Visibility="Collapsed" Text="{DynamicResource SoundtrackLibraryErrorStr}" HorizontalAlignment="Center" FontSize="14" VerticalAlignment="Center" TextWrapping="Wrap" TextAlignment="Center"/>
                </StackPanel>
            </Grid>
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" Text="{DynamicResource SoundtrackHeaderStr}" FontSize="14" FontWeight="SemiBold"/>
                    <ItemsControl x:Name="SoundtrackItems" Margin="0,20,0,0" Visibility="Collapsed" AutomationProperties.Name="{DynamicResource SoundtrackStr}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel HorizontalAlignment="Stretch"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <DockPanel Margin="0,10">
                                    <ContentControl Focusable="False" Content="{DynamicResource MusicFileIcon}" Width="30"/>
                                    <ex:AppButton Click="RemoveBtns_Click" DockPanel.Dock="Right" NoShadow="True" Icon="{DynamicResource CrossIcon}" TextVisibility="Collapsed" IconSize="23" Padding="6,0" Height="32" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTip="{DynamicResource RemoveFileCmStr}"/>
                                    <ex:AppButton Click="MoveDownBtns_Click" Visibility="{Binding DownVisibility}" DockPanel.Dock="Right" Margin="0,0,5,0" NoShadow="True" Icon="{DynamicResource DownIcon}" TextVisibility="Collapsed" IconSize="23" Padding="6,0" Height="32" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTip="{DynamicResource MoveDownStr}"/>
                                    <ex:AppButton Click="MoveUpBtns_Click" Visibility="{Binding UpVisibility}" DockPanel.Dock="Right" Margin="0,0,5,0" NoShadow="True" Icon="{DynamicResource UpIcon}" TextVisibility="Collapsed" IconSize="23" Padding="6,0" Height="32" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTip="{DynamicResource MoveUpStr}"/>
                                    <ex:AppButton Click="PlayBtns_Click" DockPanel.Dock="Right" Margin="0,0,5,0" NoShadow="True" Icon="{Binding PlaybackIcon}" TextVisibility="Collapsed" IconSize="23" Padding="6,0" Height="32" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTip="{Binding PlaybackToolTip}"/>
                                    <TextBlock VerticalAlignment="Center" Margin="10,0,10,0" FontSize="14" Padding="0" TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" LineHeight="18">
                                        <Run Text="{Binding Name}"/><LineBreak/><Run FontSize="12" Text="{Binding Duration}"/>
                                    </TextBlock>
                                </DockPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <ex:AppButton x:Name="BrowseBtn" Click="BrowseBtn_Click" Margin="0,20,0,0" Background="{DynamicResource BackSpecialColor}" LastChildFill="True" Icon="{DynamicResource OpenIcon}" Text="{DynamicResource BrowsePCStr}" HorizontalAlignment="Left"/>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>
        <DockPanel Height="30" Margin="0" VerticalAlignment="Top" Background="{DynamicResource AppColor}">
            <ex:AppButton x:Name="CloseBtn" IsCloseBtn="True" Background="Transparent" Icon="{DynamicResource CloseWhiteIcon}" NoShadow="True" CornerRadius="0" IconSize="16" Height="30" Padding="7,0" TextVisibility="Collapsed" DockPanel.Dock="Right" ToolTip="{DynamicResource CloseStr}"/>
            <ex:AppButton x:Name="AppLogoBtn" HasNoEffects="True" Focusable="False" Background="Transparent" Icon="{DynamicResource AppWhiteIcon}" NoShadow="True" CornerRadius="0" IconSize="20" Height="30" Padding="6,0,0,0" TextVisibility="Collapsed"/>
            <ex:AppButton x:Name="TitleBtn" HasNoEffects="True" Focusable="False" Text="{Binding Title, ElementName=Snd}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Foreground="White" FontSize="12" GapMargin="0" Background="Transparent" NoShadow="True" CornerRadius="0" IconVisibility="Collapsed" Height="30" Padding="7,0"/>
        </DockPanel>
        <Popup x:Name="CategoryPopup" PlacementTarget="{Binding ElementName=FilterBtn}" VerticalOffset="5" Style="{DynamicResource ExpressPopup}">
            <ex:PopupContainer Height="300" Width="240">
                <ItemsControl x:Name="CategoryItems">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ex:AppCheckBox Click="CategoryBtns_Click" Content="{Binding Name}" Tag="{Binding ID}" CornerRadius="0" HorizontalContentAlignment="Stretch" IsChecked="{Binding Selected}" Margin="0"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ex:PopupContainer>
        </Popup>
    </Grid>
</ex:ExpressWindow>
